<%- include('header') -%>

<div class="bg-light py-3">
  <div class="container">
    <div class="row">
      <div class="col-md-12 mb-0"><a href="/index">Home</a> <span class="mx-2 mb-0">/</span> <strong class="text-black"><%= product.productName %></strong></div>
    </div>
  </div>
</div>

<div class="site-section">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <img id="productImage" src="<%= product.productImage %>" alt="Product Image" class="img-fluid" width="300px">
      </div>
      <div class="col-md-6">
        <h2 id="productName" class="text-black"><%= product.brandName %></h2>
        <h4 id="productName" class="text-black"><%= product.productName %></h4>
        <p id="productDescription"><%= product.description %></p>
        <p id="productPrice" class="mb-4">$<%= product.price %></p>
        <p class="mb-1 d-flex">
          <label for="option-sm" class="d-flex mr-3 mb-3">
            <span class="d-inline-block mr-2" style="top:-2px; position: relative;"><input type="radio" id="option-sm" name="shop-sizes"></span> <span class="d-inline-block text-black">Small</span>
          </label>
          <!-- Add radio buttons for sizes as needed -->
        </p>
        <div class="mb-5">
          <div class="input-group mb-3" style="max-width: 120px;">
            <div class="input-group-prepend">
              <button class="btn btn-outline-primary js-btn-minus" type="button">&minus;</button>
            </div>
            <input type="text" id="quantity" class="form-control text-center" value="1" placeholder="" aria-label="Example text with button addon" aria-describedby="button-addon1">
            <div class="input-group-append">
              <button class="btn btn-outline-primary js-btn-plus" type="button">&plus;</button>
            </div>
          </div>
        </div>
        <div class="d-flex ">
          <p class="mb-0 mx-3">
            <a href="#" class="buy-now btn btn-sm btn-primary" id="addToCartBtn">Add To Cart</a>
          </p>
          <!-- <p class="mb-0 mx-3">
            <a href="/checkout" class="buy-now btn btn-sm btn-primary" id="buyNowBtn">Buy Now</a>
          </p> -->
        </div>
        
        
      </div>
    </div>
  </div>
</div>
<script>


document.getElementById('addToCartBtn').addEventListener('click', function(event) {
  event.preventDefault();
  
  const productId = "<%= product._id %>";
  const quantity = document.getElementById('quantity').value;
  
  fetch('/cart', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      productId: productId,
      quantity: quantity
    })
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      // Update the cart count
      const cartCountElement = document.getElementById('cart-count');
      const currentCount = parseInt(cartCountElement.innerText, 10);
      cartCountElement.innerText = currentCount + parseInt(quantity, 10);
      // Optionally, you can navigate to the cart page
      // window.location.href = '/cartpage';
    } else {
      alert('Failed to add product to cart.');
    }
  })
  .catch(error => console.error('Error:', error));
});

</script>
<!-- Corrected paths for CSS and JS files -->
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/jquery-ui.css">
<link rel="stylesheet" href="/css/magnific-popup.css">
<link rel="stylesheet" href="/css/owl.carousel.min.css">
<link rel="stylesheet" href="/css/owl.theme.default.min.css">
<link rel="stylesheet" href="/css/aos.css">
<link rel="stylesheet" href="/fonts/icomoon/style.css">

<script src="/js/jquery-3.3.1.min.js"></script>
<script src="/js/jquery-ui.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/aos.js"></script>
<script src="/js/main.js"></script>
<%- include('footer') -%>
